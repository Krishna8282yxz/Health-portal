<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Health Quiz</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Smooth transition for hover effects */
        .transition-all-slow {
            transition: all 0.4s ease;
        }

        /* Custom scrollbar for quiz container */
        #quiz-container::-webkit-scrollbar {
            width: 8px;
        }

        #quiz-container::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }

        #quiz-container::-webkit-scrollbar-thumb {
            background: #10b981;
            border-radius: 10px;
        }

        /* Pulse animation for correct/incorrect feedback */
        @keyframes pulse {
            0% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.6;
                transform: scale(1.02);
            }

            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .pulse {
            animation: pulse 0.6s ease-out;
        }

        /* Mobile navigation */
        .mobile-nav {
            display: none;
        }

        @media (max-width: 768px) {
            .desktop-nav {
                display: none;
            }

            .mobile-nav {
                display: flex;
            }
        }

        /* Background overlay for better text readability */
        .bg-overlay {
            position: relative;
        }

        .bg-overlay::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(240, 253, 244, 0.9);
            /* Soft green-white overlay */
            z-index: 0;
        }

        .content-overlay {
            position: relative;
            z-index: 10;
        }
    </style>
</head>

<body class=""
    style="background-image: url('assets/index_background.jpg');">
    <div class="relative z-10 min-h-screen flex flex-col content-overlay">

        <!-- Desktop Navigation -->
        <nav
            class="desktop-nav bg-white shadow-lg rounded-b-3xl px-4 md:px-12 py-4 md:py-6 w-full max-w-6xl mt-4 md:mt-6 flex justify-between items-center mx-auto">
            <a href="index.html" class="font-extrabold text-2xl md:text-4xl text-green-700 tracking-wider">Health
                Portal</a>
            <ul class="flex gap-4 md:gap-12 font-bold">
                <li><a href="quiz.html"
                        class="text-blue-600 px-4 py-2 md:px-6 md:py-3 rounded-lg bg-blue-50 font-semibold text-lg md:text-2xl">Quiz</a>
                </li>
                <li><a href="guides.html"
                        class="hover:text-blue-600 px-4 py-2 md:px-6 md:py-3 rounded-lg transition text-lg md:text-2xl">Guides</a>
                </li>
            </ul>
        </nav>

        <main class="flex-grow mx-auto max-w-6xl w-full mt-6 md:mt-10 p-4 md:p-6">
            <!-- Header -->
            <div class="text-center mb-6 md:mb-10">
                <h1 class="text-3xl md:text-5xl font-extrabold text-green-800 mb-4 tracking-tight">üß† Health Awareness
                    Quiz</h1>
                <p class="text-lg md:text-xl text-gray-700 max-w-3xl mx-auto leading-relaxed">
                    Test your knowledge on wellness, prevention, and healthy habits. 10 questions. Instant feedback.
                </p>
            </div>

            <!-- Progress Bar -->
            <div class="w-full bg-gray-200 rounded-full h-2 md:h-3 mb-6 md:mb-10 mx-auto overflow-hidden">
                <div id="progress-bar"
                    class="bg-gradient-to-r from-green-500 to-blue-500 h-full rounded-full transition-all duration-500 w-0">
                </div>
            </div>

            <!-- Quiz Container -->
            <div id="quiz-container" class="space-y-6 max-h-[60vh] overflow-y-auto p-4 pr-2 rounded-2xl">
                <!-- Questions will be injected here -->
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 md:gap-6 mt-8 md:mt-12 max-w-3xl mx-auto">
                <button id="submit-quiz"
                    class="bg-gradient-to-r from-green-600 to-green-700 text-white font-bold px-6 py-4 md:px-10 md:py-5 rounded-2xl md:rounded-3xl shadow-xl hover:from-green-700 hover:to-blue-600 transform hover:scale-105 transition-all duration-300 flex-1 text-lg md:text-2xl font-semibold">
                    üìù Submit Quiz
                </button>
                <button id="retry-quiz"
                    class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white font-bold px-6 py-4 md:px-10 md:py-5 rounded-2xl md:rounded-3xl shadow-xl hover:from-indigo-700 hover:to-blue-700 transform hover:scale-105 transition-all duration-300 flex-1 text-lg md:text-2xl font-semibold hidden">
                    üîÑ Try Again
                </button>
            </div>

            <!-- Result Display -->
            <div id="quiz-result"
                class="mt-8 md:mt-12 text-xl md:text-3xl font-bold text-center p-4 md:p-6 rounded-xl md:rounded-2xl bg-white bg-opacity-80 shadow-lg backdrop-blur-sm transition-all duration-500 opacity-0">
            </div>
        </main>

        <footer class="mt-auto py-6 text-center text-gray-600">
            <p>¬© 2025 Health Portal. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // Embedded quiz data - no need for external JSON file
        const quizData = [
            {
                "question": "What is the recommended daily water intake for adults?",
                "options": [
                    "1-2 liters",
                    "2-3 liters",
                    "3-4 liters",
                    "Only when thirsty"
                ],
                "answer": "2-3 liters"
            },
            {
                "question": "Which of these is NOT a symptom of diabetes?",
                "options": [
                    "Frequent urination",
                    "Excessive thirst",
                    "Increased appetite",
                    "Improved vision"
                ],
                "answer": "Improved vision"
            },
            {
                "question": "How many minutes of moderate exercise should adults get weekly?",
                "options": [
                    "60 minutes",
                    "90 minutes",
                    "150 minutes",
                    "300 minutes"
                ],
                "answer": "150 minutes"
            },
            {
                "question": "Which vitamin is primarily obtained from sunlight?",
                "options": [
                    "Vitamin A",
                    "Vitamin B12",
                    "Vitamin C",
                    "Vitamin D"
                ],
                "answer": "Vitamin D"
            },
            {
                "question": "What is the normal resting heart rate for adults?",
                "options": [
                    "40-60 beats per minute",
                    "60-100 beats per minute",
                    "100-120 beats per minute",
                    "120-140 beats per minute"
                ],
                "answer": "60-100 beats per minute"
            },
            {
                "question": "Which of these is a common symptom of stress?",
                "options": [
                    "Increased energy",
                    "Improved concentration",
                    "Headaches",
                    "Better sleep"
                ],
                "answer": "Headaches"
            },
            {
                "question": "What BMI range is considered healthy?",
                "options": [
                    "Below 18.5",
                    "18.5-24.9",
                    "25-29.9",
                    "30 and above"
                ],
                "answer": "18.5-24.9"
            },
            {
                "question": "Which of these foods is highest in fiber?",
                "options": [
                    "White bread",
                    "Banana",
                    "Lentils",
                    "Chicken breast"
                ],
                "answer": "Lentils"
            },
            {
                "question": "How often should adults get a health check-up?",
                "options": [
                    "Every 6 months",
                    "Every year",
                    "Every 2 years",
                    "Only when sick"
                ],
                "answer": "Every year"
            },
            {
                "question": "Which practice is most effective for preventing flu?",
                "options": [
                    "Taking vitamin C daily",
                    "Annual vaccination",
                    "Drinking herbal tea",
                    "Avoiding cold weather"
                ],
                "answer": "Annual vaccination"
            }
        ];

        let selectedQuestions = [];
        let userAnswers = [];

        // Load quiz from embedded data
        function loadQuiz() {
            // Shuffle and pick 10 random questions
            selectedQuestions = [...quizData]
                .sort(() => 0.5 - Math.random())
                .slice(0, 10);

            userAnswers = new Array(selectedQuestions.length).fill(null);

            const quizContainer = document.getElementById("quiz-container");
            quizContainer.innerHTML = "";
            document.getElementById("quiz-result").classList.add("opacity-0");
            document.getElementById("quiz-result").textContent = "";
            document.getElementById("retry-quiz").classList.add("hidden");
            document.getElementById("progress-bar").style.width = "0%";

            // Inject questions
            selectedQuestions.forEach((q, index) => {
                const qEl = document.createElement("div");
                qEl.className = "bg-white bg-opacity-90 backdrop-blur-sm rounded-2xl md:rounded-3xl shadow-xl p-4 md:p-6 transition-all-slow hover:shadow-lg border border-green-100";
                qEl.innerHTML = `
                <div class="flex justify-between items-center mb-4">
                    <p class="font-extrabold text-xl md:text-2xl text-green-700">#${index + 1}</p>
                    <span id="feedback-${index}" class="hidden text-base md:text-lg font-semibold px-3 py-1 rounded-full"></span>
                </div>
                <p class="font-semibold text-gray-900 text-lg md:text-xl leading-relaxed mb-4">${q.question}</p>
                <div class="space-y-3">
                    ${q.options.map((opt, optIndex) => `
                        <label class="block p-3 md:p-4 rounded-lg md:rounded-xl cursor-pointer hover:bg-green-50 transition-all duration-200
                                    ${userAnswers[index] === opt ? 'bg-green-100 ring-2 ring-green-300' : 'bg-gray-50'}"
                            onclick="selectAnswer(${index}, '${opt.replace(/'/g, "\\'")}')">
                            <input type="radio"
                                name="q${index}"
                                value="${opt}"
                                class="sr-only"
                                ${userAnswers[index] === opt ? 'checked' : ''} />
                            <div class="flex items-center">
                                <span class="w-5 h-5 md:w-6 md:h-6 rounded-full border-2 border-gray-400 flex items-center justify-center mr-3
                                            ${userAnswers[index] === opt ? 'border-green-600 bg-green-600 text-white' : ''}">
                                    ${userAnswers[index] === opt ? '‚úì' : ''}
                                </span>
                                <span class="text-gray-800 font-medium">${opt}</span>
                            </div>
                        </label>
                    `).join("")}
                </div>
            `;
                quizContainer.appendChild(qEl);
            });
        }

        // Select answer and update UI
        function selectAnswer(qIndex, value) {
            userAnswers[qIndex] = value;
            updateQuestionUI(qIndex);
            updateProgress();
        }

        // Update single question UI
        function updateQuestionUI(index) {
            const labels = document.querySelectorAll(`#quiz-container label`);
            const startIdx = index * 4; // assuming 4 options per question
            labels.forEach((label, i) => {
                if (i >= startIdx && i < startIdx + 4) {
                    const input = label.querySelector('input');
                    const isChecked = input?.value === userAnswers[index];
                    label.classList.toggle('bg-green-100', isChecked);
                    label.classList.toggle('ring-2', isChecked);
                    label.classList.toggle('ring-green-300', isChecked);
                    const checkmark = label.querySelector('span:first-child');
                    checkmark.classList.toggle('bg-green-600', isChecked);
                    checkmark.classList.toggle('border-green-600', isChecked);
                    checkmark.classList.toggle('text-white', isChecked);
                    checkmark.textContent = isChecked ? '‚úì' : '';
                }
            });
        }

        // Update progress bar
        function updateProgress() {
            const filled = userAnswers.filter(ans => ans !== null).length;
            const percent = (filled / selectedQuestions.length) * 100;
            document.getElementById("progress-bar").style.width = `${percent}%`;
        }

        // Submit quiz
        document.getElementById("submit-quiz").addEventListener("click", () => {
            let score = 0;
            let feedback;

            selectedQuestions.forEach((q, index) => {
                const feedbackEl = document.getElementById(`feedback-${index}`);

                if (userAnswers[index]) {
                    if (userAnswers[index] === q.answer) {
                        score++;
                        feedbackEl.className = "inline-block bg-green-100 text-green-800 pulse px-3 py-1 rounded-full";
                        feedbackEl.textContent = "‚úÖ Correct!";
                    } else {
                        feedbackEl.className = "inline-block bg-red-100 text-red-800 pulse px-3 py-1 rounded-full";
                        feedbackEl.textContent = `‚ùå ${q.answer}`;
                    }
                    feedbackEl.classList.remove("hidden");
                } else {
                    feedbackEl.className = "inline-block bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full";
                    feedbackEl.textContent = "‚ö†Ô∏è Skipped";
                    feedbackEl.classList.remove("hidden");
                }
            });

            // Show result
            const resultEl = document.getElementById("quiz-result");
            if (score === selectedQuestions.length) {
                resultEl.innerHTML = `üéâ Perfect Score! <br>You scored <strong>${score}/${selectedQuestions.length}</strong> ‚Äî Amazing job!`;
                resultEl.classList.add("bg-gradient-to-r", "from-green-100", "to-teal-100");
            } else if (score >= 7) {
                resultEl.innerHTML = `üëè Great job! <br>You scored <strong>${score}/${selectedQuestions.length}</strong>. Keep learning!`;
                resultEl.classList.add("bg-gradient-to-r", "from-blue-100", "to-green-100");
            } else {
                resultEl.innerHTML = `üìö Good effort! <br>You scored <strong>${score}/${selectedQuestions.length}</strong>. Review the guides to improve!`;
                resultEl.classList.add("bg-gradient-to-r", "from-yellow-100", "to-orange-100");
            }

            resultEl.classList.remove("opacity-0");
            resultEl.classList.add("opacity-100", "border", "border-green-200");

            // Show retry button
            document.getElementById("retry-quiz").classList.remove("hidden");
        });

        // Retry quiz
        document.getElementById("retry-quiz").addEventListener("click", () => {
            document.getElementById("quiz-result").classList.add("opacity-0");
            setTimeout(() => loadQuiz(), 300);
        });

        // Initial load
        loadQuiz();
    </script>
</body>

</html>